# 缓存并发更新

大部分时候，数据存储在 DB，缓存应该淘汰。但有些时候，数据不存在数据库，缓存需要使用更新。

典型的业务场景：调用第三方服务，每次访问接口需要带上 token。这个 token 是有有效期的，当 token 失效时，需要重新认证申请。也可以在 token 过期前申请，此时 旧token 会失效。这个 token 一般放在缓存中。

当系统并发访问第三方接口时，在 token 过期的极限时间内，并发更新有可能导致 token 相互失效。此时，如何进行优化，常见方案如下：线上的服务只读取 token，token 的更新由异步服务定期更新 token，避免并发的更新。

