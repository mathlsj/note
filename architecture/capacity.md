# 容量设计

随着业务的增长，日流量不断增长。此时，需要容量预估。

## 容量预估

什么情况下需要容量预估：

1. 容量有质量性增长
2. 临时运营活动
3. 新系统上线

容量怎么预估，其有哪些指标。这主要看具体的业务对应到系统的主要矛盾。例如：

+ 数据量
+ 并发量，吞吐
+ 带宽
+ cpu/memory等

容量如何预估，以吞吐量为例。需要以下几步。

1. 评估总访问量。询问产品或运营的预估访问量。
2. 评估平均吞吐量。总量除以总时间，时间一般只按白天计算。
3. 评估系统高峰的QPS。根据业务特性，看业务访问曲线。如果没有业务访问曲线，按2/8原则来处理。
4. 评估单机的QPS。进行压力测试。
5. 根据线上冗余度做决策。
