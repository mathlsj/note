# 微服务的负载

负载均衡方法论：

1. 同构，重点在于均匀。可以使用轮询的方式。
2. 异构，重点在于负载与能力匹配。主要是实施在连接池组件上。

异构服务器负载均衡方案：

1. 静态权重。通过下游服务的处理能力来调配连接池。
2. 动态权重。服务器能不能处理的过来，理论上是调用方说了算。和静态权重类似，对每个服务的连接可以用一个权重来标识，下游每次请求成功增加权重，请求失败减少权重。权重的增加是缓慢的过程，权重的增加是快速的过程。

过程保护，没有实施过载保护，随着外部负载的增加，超过了服务的请求能力，处理能力会掉底。如果实施了过载保护，随着外部负载的增加，会到一个最高值后，保持相对的稳定。

如何实施过载保护？

1. 静态权重。给微服务设置一个阈值。
2. 动态权重。连接代表服务，分值代表服务的处理能力。处理成功加小分，处理失败扣大分。临界边界喘小口气。死亡状态喘大口气。


